<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Usuários</title>
</h:head>




<h:body>

	<h:form id="userform">
		<p:growl id="msgGrowl" life="15000" />
		<p:panel header="Usuários">
		</p:panel>



		<!-- _________________________________________________________________________________________________________________________________ -->
		<!-- Informações de cabeçalho da tabela -->


		<p:dataTable id="dataTable" rowsPerPageTemplate="7,15,30,50,100"
			emptyMessage="Nenhum Registro encontrado" rows="7" paginator="true"
			var="users" value="#{usuarioBean.listaUsuario}"
			style=" text-align:center;">


			<f:facet name="header">

				<p:panelGrid>
					
					<!-- Animação de loading -->
					<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
						closable="false" resizable="false" showHeader="false" >
						<p:graphicImage value="/images/loading6.gif" />
					</p:dialog>

					<!-- Personalizar table -->
					<p:commandButton title="Filtrar Colunas" id="toggler" type="button"
						value="" icon="ui-icon-calculator"
						style="float:left; height: 33px; width:34px " />
					<p:columnToggler datasource="dataTable" trigger="toggler" />



					<p:ajaxStatus onstart="PF('statusDialog').show()"
						onsuccess="PF('statusDialog').hide()" />

					<!-- Atualizar table -->
					<p:commandButton value="Atualizar" icon="ui-icon-refresh"
						action="#{usuarioBean.carregar()}"
						style="float:left; height:33px;"
						update=":userform:dataTable :userform:msgGrowl" />






					<!-- Adicionar  -->
					<p:commandButton icon="ui-icon-plus " value="Adicionar "
						style="float:left; height:33px;"
						oncomplete="PF('dialogo').show();" action="#{usuarioBean.novo()}"
						update=":dialogform" />

				</p:panelGrid>
			</f:facet>


			<f:facet name="footer">
				<!--Vazio...-->
			</f:facet>

			<!-- _________________________________________________________________________________________________________________________________ -->
			<!-- Informações das Colunas -->

			<p:column headerText="Exp" width="4%">
				<!-- Expandir infos -->
				<p:rowToggler />
			</p:column>

			<p:column headerText="ID" width="11%" sortBy="#{users.codigo}"
				filterBy="#{users.codigo}" >
				<p:outputLabel value="#{users.codigo}" />
			</p:column>

			<p:column headerText="Nome" sortBy="#{users.nome}"
				filterBy="#{users.nome}">
				<p:outputLabel value="#{users.nome}" />
			</p:column>

			<p:column headerText="Email" sortBy="#{users.email}"
				filterBy="#{users.email}">
				<p:outputLabel value="#{users.email}" />
			</p:column>

			<p:column headerText="RG" sortBy="#{users.rg}" filterBy="#{users.rg}">
				<p:outputLabel value="#{users.rg}" />
			</p:column>

			<p:column headerText="Status" width="10%" sortBy="#{users.status}"
				filterBy="#{users.status}">
				<p:outputLabel value="#{users.status}" />
			</p:column>

			<p:column headerText="Opções" width="18%">


				<!-- Editar -->
				<p:commandButton title="Editar" icon="ui-icon-pencil"
					actionListener="#{usuarioBean.getinstancia}"
					update=":dialogformEditor"
					oncomplete="PF('dialogEditorPanel').show();">
					<f:attribute name="meuSelect" value="#{users}" />
				</p:commandButton>

				<!-- Resetar Senha -->
				<p:commandButton title="Resetar Senha" icon="ui-icon-key "
					actionListener="#{usuarioBean.getinstancia}"
					update=":dialogformSenha"
					oncomplete="PF('dialogSenhaPanel').show();">
					<f:attribute name="meuSelect" value="#{users}" />
				</p:commandButton>
				


				<!-- Gerar Curriculo -->
				<p:commandButton title="Curriculo" icon="ui-icon-person">

				</p:commandButton>
				
				<!-- Excluir -->
				<p:commandButton title="Excluir" icon="ui-icon-trash"
					actionListener="#{usuarioBean.excluir}" update=":userform:msgGrowl">
					<p:confirm header="Confirmação" message="Deseja excluir o usuário"
						icon="ui-icon-alert" />
					<f:attribute name="meuSelect" value="#{users}" />
				</p:commandButton>

				<!-- Dialogo Global -->
				<p:confirmDialog global="true">
					<p:commandButton value="sim" type="button"
						styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					<p:commandButton value="não" type="button"
						styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				</p:confirmDialog>

			</p:column>


			<!-- _________________________________________________________________________________________________________________________________ -->
			<!-- Informações após expandir linha -->


			<p:rowExpansion styleClass=" width=37%">

				<p:panelGrid columns="1" columnClasses="label,value"
					style="text-align:left;">

					<h:outputText value="Sexo: #{users.sexo}" />
					<h:outputText value="Senha: #{users.senha}" />
					<h:outputText value="CPF: #{users.cpf}" />
					<h:outputText value="RG: #{users.rg}" />
					<h:outputText value="Data de Nascimento: #{users.dataNascimento}" />
					<h:outputText value="Cadastrado dia: #{users.dataCadastro}" />

				</p:panelGrid>

				<!-- <p:separator style="border: 2px solid #999966; border-radius: 100px/9px; background-color:  #6666ff; height:10px;"> </p:separator>  -->
				<p:separator
					style=" height:7px;border-radius: 100px/9px; background-color:#ffffff"></p:separator>
				<p:separator style=" height:10px;background-color:#e6e6ff"></p:separator>
			</p:rowExpansion>

		</p:dataTable>
	</h:form>


	<!-- _________________________________________________________________________________________________________________________________ -->
	<!--   Dialog do Adicionar             -->


	<!-- draggable = false ou true "mover a janela suspensa"| 
     resizable=false ou true"mudar o tamanho a janela suspensa" |
     modal=false ou true "clicar foda da janela suspensa"|
     closable="true?" 'controla o botão fechar do dialogo'-->

	<p:dialog header="Editar Usuário" widgetVar="dialogo" modal="true"
		responsive="true">

		<h:form id="dialogform">

			<p:messages id="msgdialog" autoUpdate="true" closable="true" />
			<h:panelGrid columns="2" id="dialogpanel">

				<p:outputLabel value="Status: " />
				<p:selectBooleanButton onLabel="Ativado" offLabel="Desativado"
					value="#{usuarioBean.usuario.status}">
				</p:selectBooleanButton>

				<p:outputLabel value="Sexo: " />
				<p:selectOneRadio value="#{usuarioBean.usuario.sexo}">

					<f:selectItem itemValue="masculino" itemLabel="Masculino" />
					<f:selectItem itemValue="feminino" itemLabel="Feminino" />

				</p:selectOneRadio>

				<p:outputLabel value="Nome: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.nome}" />


				<p:outputLabel value="RG: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.rg}" />

				<p:outputLabel value="CPF: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.cpf}" />

				<p:outputLabel value="Data de Nasc: " required="true" />
				<p:calendar yearRange="c-60:c+1" navigator="true" pages="1"
					value="#{usuarioBean.usuario.dataNascimento}" />

				<p:separator style="border: 1px solid #e6e6ff; height: 1px;"></p:separator>
				<p:separator style="border: 1px solid #e6e6ff; height: 1px;"></p:separator>


				<p:outputLabel value="E-mail:" required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.email}" />

				<p:outputLabel value="Senha:" required="true" />
				<p:password maxlength="16" size="25"
					value="#{usuarioBean.usuario.senha}" />

				<p:outputLabel value="Confirmar senha:" required="true" />
				<p:password maxlength="16" size="25"
					value="#{usuarioBean.confirmar}" />


			</h:panelGrid>



			<h:panelGrid columns="2">

				<p:commandButton value="Salvar"
					actionListener="#{usuarioBean.salvar()}"
					update=":dialogform:msgdialog" />
				<p:commandButton value="Fechar"
					actionListener="#{usuarioBean.fechar()}"
					oncomplete="PF('dialogo').hide();" />

			</h:panelGrid>

		</h:form>

	</p:dialog>


	<!-- _________________________________________________________________________________________________________________________________ -->
	<!-- Dialogo do Editar -->


	<p:dialog header="Editar Usuário" widgetVar="dialogEditorPanel"
		modal="true" responsive="true">

		<h:form id="dialogformEditor">

			<p:messages id="msgdialogEditor" autoUpdate="true" closable="true" />
			<h:panelGrid columns="2" id="dialogEditorPanel">

				<p:outputLabel value="Status: " />
				<p:selectBooleanButton onLabel="Ativado" offLabel="Desativado"
					value="#{usuarioBean.usuario.status}">
				</p:selectBooleanButton>

				<p:outputLabel value="Sexo: " />
				<p:selectOneRadio value="#{usuarioBean.usuario.sexo}">

					<f:selectItem itemValue="masculino" itemLabel="Masculino" />
					<f:selectItem itemValue="feminino" itemLabel="Feminino" />

				</p:selectOneRadio>

				<p:outputLabel value="Nome: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.nome}" />


				<p:outputLabel value="RG: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.rg}" />

				<p:outputLabel value="CPF: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.cpf}" />

				<p:outputLabel value="Data de Nasc: " required="true" />
				<p:calendar yearRange="c-60:c+1" navigator="true" pages="1"
					value="#{usuarioBean.usuario.dataNascimento}" />

				<p:outputLabel value="E-mail:" required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.email}" />

			</h:panelGrid>



			<h:panelGrid columns="2">

				<p:commandButton value="Salvar"
					actionListener="#{usuarioBean.editar}"
					update=":dialogformEditor:msgdialogEditor" />
				<p:commandButton value="Fechar"
					actionListener="#{usuarioBean.fechar()}"
					oncomplete="PF('dialogEditorPanel').hide();" />

			</h:panelGrid>

		</h:form>

	</p:dialog>


	<!-- _________________________________________________________________________________________________________________________________ -->
	<!-- Dialogo do Reset de senha -->


	<p:dialog header="Resetar senha" widgetVar="dialogSenhaPanel"
		modal="true" responsive="true">

		<h:form id="dialogformSenha">

			<p:messages id="msgdialogSenha" autoUpdate="true" closable="true" />
			<h:panelGrid columns="2" id="dialogSenhaPanelGrid">



				<p:outputLabel value="Nome: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.nome}" />



				<p:outputLabel value="CPF: " required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.cpf}" />


				<p:outputLabel value="E-mail:" required="true" />
				<p:inputText maxlength="50" size="25"
					value="#{usuarioBean.usuario.email}" />

				<p:outputLabel value="Senha:" required="true" />
				<p:password maxlength="16" size="25"
					value="#{usuarioBean.usuario.senha}" />

				<p:outputLabel value="Confirmar senha:" required="true" />
				<p:password maxlength="16" size="25"
					value="#{usuarioBean.confirmar}" />

			</h:panelGrid>


			<h:panelGrid columns="2">

				<p:commandButton value="Salvar"
					actionListener="#{usuarioBean.editarSenha()}"
					update=":dialogformSenha:msgdialogSenha" />
				<p:commandButton value="Fechar"
					actionListener="#{usuarioBean.fechar()}"
					oncomplete="PF('dialogSenhaPanel').hide();" />

			</h:panelGrid>

		</h:form>

	</p:dialog>




</h:body>
</html>